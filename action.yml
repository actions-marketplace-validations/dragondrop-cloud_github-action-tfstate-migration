name: "Dragondrop TFState Migration"
branding:
  icon: cloud
  color: red
description: "Plan or Apply State Migrations"
inputs:
  # TODO: TF Cloud authentication -- Need to figure this out quickly
  # TODO: Possible that these parameters should all just be specified
  # TODO: AWS/GCP variables.
  is-apply:
    description: "Boolean representing whether the job should run statemigration or just check to see if they are valid."
    required: true
    default: "false"
  terraform-version:
    description: "Version of terraform to use for running the statemigration."
    required: true
    default: "latest"
  workspace-directories:
    description: "List of relative paths to workspace directories with statemigration to perform."
    required: true
runs:
  using: "docker"
  image: "Dockerfile"
  env:
    TERRAFORM_VERSION: ${{ inputs.terraform-version }}
    ISAPPLY: ${{ inputs.is-apply }}
    WORKSPACEDIRECTORIES: ${{ inputs.workspace-directories }}
